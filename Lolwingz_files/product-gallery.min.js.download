function updateQuantity(t,e){t.closest(".c-productGallery__card__footer,.c-productCard__footer").find(".add-to-basket").data("quantity",e);var a=t.closest(".product-gallery__card").find(".btn-buy-now");0<a.length&&a.attr("href",a.attr("href").replace(/q=(\d+)/,"q="+e)),t.val(e)}!function(){for(var t=document.querySelectorAll(".c-productCard--partnered"),e=0;e<t.length;e++){var a=t[e],r=a.querySelector(".c-productCard__footer__buyFrom"),i=a.querySelector(".c-productCard__overlay__close");r&&r.addEventListener("click",n),i&&i.addEventListener("click",o)}function n(){var t=document.querySelectorAll(".c-productCard--partnered.c-productCard--active");if(this.parentNode.parentNode.parentNode.classList.add("c-productCard--active"),0<t.length)for(var e=0;e<t.length;e++){t[e].classList.remove("c-productCard--active")}}function o(){this.parentNode.parentNode.classList.remove("c-productCard--active")}}(),$(document).on("click",".section-product_gallery .f-quantity .f-quantity__minus",function(){var t=$(this).siblings(".f-quantity__input").find("input"),e=parseInt(t.val());e||(e=1),1<e&&(e-=1),updateQuantity(t,e)}),$(document).on("click",".section-product_gallery .f-quantity .f-quantity__plus",function(){var t=$(this).siblings(".f-quantity__input").find("input"),e=Number(t.data("max")),a=parseInt(t.val());if(a||(a=1),a<e)a+=1;else{var r=t.siblings(".tooltip-group");clearTimeout(r.data("timeout")),r.data("timeout",setTimeout(function(){r.hide()},3e3)),r.show()}updateQuantity(t,a)}),$(document).on("blur",".section-product_gallery .f-quantity .f-quantity__input input",function(){var t=$(this),e=Number(t.data("max")),a=parseInt(t.val());if((!a||a<1)&&(a=1),e<a){a=e;var r=t.siblings(".tooltip-group");clearTimeout(r.data("timeout")),r.data("timeout",setTimeout(function(){r.hide()},3e3)),r.show()}updateQuantity(t,a)});