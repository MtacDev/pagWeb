(function(n){function e(){var n=window.innerWidth;!t.active&&n<t.maxWidth?(t.runEvent(),t.active=!0):t.active&&n>t.maxWidth&&(t.active=!1,t.killEvent&&t.killEvent())}function u(){n(".overlay-gallery").hide();n("body").removeClass("scroll-disabled")}function c(){o.each(function(t){var r=n(this),u=r.find("img")[0],f,e,o;u=n(u).attr("src");u=u.replace("-lg","-zm-lg");f=r.find(n(".c-photoGallery__card__title")).html();e=r.find(n(".c-photoGallery__card__description")).html()?r.find(n(".c-photoGallery__card__description")).html():null;o={img:u,title:f,description:e};i.push(o);t!=s-1||h||(h=!0,l());r.attr("data-num",t);r.click(function(){n(".overlay-gallery").show();n("body").addClass("scroll-disabled");n(".gallery-slider").slick("slickGoTo",r.attr("data-num"));window.location.href.indexOf("kingstongo")>0&&(window.location.hash="g-overlay")})})}function l(){var t,r,u,f,e;for(n(".overlay-gallery .overlay-body").prepend("<div class='gallery-slider list-unstyled'><\/div>"),t=0;t<s;t++)n(".gallery-slider").append('<div class="gallery-item"><div class="gallery-img-wrap"><\/div><\/div>'),r='<img src="'+i[t].img+'" alt="'+i[t].title+'" />',u=n(".gallery-slider").find(".gallery-img-wrap")[t],n(u).html(r);f='<p class="gallery-caption-title"><\/p>';n(".overlay-gallery .gallery-controls-content").append(f);e='<p class="gallery-caption-description"><\/p>';n(".overlay-gallery .gallery-controls-content").append(e);n(".gallery-slider").slick({slidesToScroll:1,infinite:!0,lazyLoad:"progressive",dots:!1,prevArrow:".overlay-gallery .gallery-controls .left",nextArrow:".overlay-gallery .gallery-controls .right"})}var r=document.querySelectorAll(".s-photoGallery .l-flexTiles"),t={maxWidth:"512",runEvent:function(){for(var i,t=0;t<r.length;t++)i=r[t],i.classList.contains("l-flexTiles")&&i.classList.remove("l-flexTiles");window.Rexus.flexTiles.updateAll();n(".c-photoGallery").slick({slidesToScroll:1,infinite:!0,lazyLoad:"progressive",dots:!0,prevArrow:".s-photoGallery .gallery-controls .left",nextArrow:".s-photoGallery .gallery-controls .right"})},killEvent:function(){var t,i;for(n(".s-photoGallery .slick-slider").length>0&&n(".c-photoGallery").slick("unslick"),t=0;t<r.length;t++)i=r[t],i.classList.contains("l-flexTiles")||i.classList.add("l-flexTiles");window.Rexus.flexTiles.updateAll();c()}},f;window.addEventListener("resize",function(){clearInterval(f);f=setTimeout(e,250)});var i=[],o=n(".s-photoGallery .c-photoGallery__card"),s=o.length,h=!1;document.onkeydown=function(n){n=n||window.event;n.keyCode==27&&u()};window.addEventListener("hashchange",function(){var n=window.location.hash;n.indexOf("g-overlay")<0&&u()});n(".overlay.overlay-gallery .close").click(u);c();e();n(".gallery-slider").on("beforeChange",function(){n(".gallery-controls-content").addClass("fade")});n(".gallery-slider").on("afterChange",function(){n(".gallery-controls-content").removeClass("fade");var t=n(this).slick("slickCurrentSlide"),r=i[t].title,u=i[t].description;n(".gallery-caption-title").html(r);n(".gallery-caption-description").html(u)})})(jQuery);